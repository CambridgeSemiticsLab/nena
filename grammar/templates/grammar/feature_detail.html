{% extends 'nena.html' %}

{% block subtitle %}
    {{ feature.fullheading }}&nbsp;{{ feature.name|safe }}
    {% if entry_filter %}matching "<span class="aramaic">{{entry_filter|safe}}</span>"{% endif %}
    {% if chosen_location_name %}in {{chosen_location_name}}{% endif %}
    {% if chosen_community_name %}in {{chosen_community_name}} communities{% endif %}
{% endblock %}

{% block page_content %}
  <div class="campl-column12 clearfix" id="feature_detail">
  <div class="campl-content-container">
    <a class="button fr" href="{% url 'grammar:feature-map' feature.id %}?{{ request.GET.urlencode }}">
        See map of this feature
    </a>
    {% include 'dialects/_dialect_filter.html' %}
    <table class="campl-table campl-table-condensed campl-table-striped">
      {% for dialect_feature in dialect_features %}
      {% with dialect=dialect_feature.dialect entries=dialect_feature.entries %}
        <tr>
          <td>
            <a href="{% url 'dialects:dialect-detail' dialect.id %}">{{ dialect.name }}</a>
          </td>
          <td>
          {% if dialect_feature.category %}
            {{dialect_feature.category}}<br>
          {% endif %}

          {% for entry in dialect_feature.entries.all %}
            <div>
              {{ entry.entry|safe }}
              <a class="filter" title="filter entries like this" href="{% url 'grammar:feature-detail' feature.id %}?entry={{ entry.entry }}">
                <svg viewBox="0 0 80 90" focusable=false><path d="m 0,0 30,45 0,30 10,15 0,-45 30,-45 Z"></path></svg>
              </a>
            </div>
          {% endfor %}
          </td>
          <td>{{ dialect.get_community_display }}</td>
          <td>{{ dialect.get_location_display }}</td>
          <td>
            <a href="{% url 'dialects:dialect-feature' dialect.id dialect_feature.id %}">details &raquo;</a>
          </td>
        </tr>
      {% endwith %}
      {% endfor %}
    </table>

  </div>
  </div>
{% endblock %}
